<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>–ê–†–¢–ï–õ–¨ v3.0 REAL-TIME</title>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        [x-cloak] { display: none !important; }
        :root { --blue: #0047ab; --neon: #ff5e00; --bg: #0a0a0a; --text: #bdc3c7; }
        .theme-modern { --blue: #00f2ff; --neon: #00ff41; --bg: #050505; }
        .theme-retro { --blue: #5d4037; --neon: #ff9800; --bg: #1a1a1a; }
        
        body { background: var(--bg); color: var(--text); font-family: 'Courier New', monospace; margin: 0; padding-bottom: 90px; transition: 0.3s; }
        .page { display: none; padding: 15px; max-width: 800px; margin: 0 auto; }
        .active { display: block !important; }
        .gost-card { border: 1px solid var(--blue); background: rgba(0,71,171,0.1); padding: 12px; margin-bottom: 10px; border-left: 5px solid var(--blue); }
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: #000; display: flex; justify-content: space-around; padding: 15px 0; border-top: 2px solid var(--blue); z-index: 1000; }
        .nav-item { color: #444; cursor: pointer; }
        .nav-item.active { color: var(--neon); transform: scale(1.2); }
        .btn-pusker { background: var(--blue); color: white; border: none; padding: 12px; width: 100%; cursor: pointer; font-weight: bold; text-transform: uppercase; margin: 5px 0; }
        .zone { border: 1px solid var(--blue); padding: 15px; margin-bottom: 15px; text-align: center; background: rgba(0,0,0,0.5); }
        .zone img { width: 100px; margin-bottom: 10px; border-radius: 5px; }
        input, select { width: 100%; padding: 10px; background: #000; color: #fff; border: 1px solid var(--blue); box-sizing: border-box; }
        table { width: 100%; border-collapse: collapse; font-size: 0.75rem; }
        th, td { border: 1px solid #333; padding: 8px; text-align: left; }
        th { background: var(--blue); }
        .rank-label { font-size: 0.6rem; padding: 2px 5px; border: 1px solid var(--neon); color: var(--neon); margin-left: 5px; }
    </style>
</head>
<body x-data="artelApp" :class="theme" x-init="initApp()">

<header style="padding:15px; text-align:center; border-bottom:2px solid var(--blue); background:#000;">
    <div style="color:var(--neon); font-weight:bold; letter-spacing: 2px;">–ê–†–¢–ï–õ–¨ –§–û–†–î–û–í–ê –ò –ë–ï–ù–¶–û–í–ê</div>
</header>

<div class="page" :class="{'active': p === 1}">
    <div class="gost-card">
        <h3 style="margin:0; color:var(--neon)" x-text="holiday"></h3>
        <p style="font-size:0.8rem" x-text="murphy"></p>
    </div>
    <div class="gost-card">
        <strong>üìú –£–°–¢–ê–í (10 –ó–ê–ü–û–í–ï–î–ï–ô)</strong>
        <div style="font-size:0.75rem; margin-top:5px;">
            <template x-for="(z, i) in zapovedi">
                <div x-text="(i+1) + '. ' + z" style="margin-bottom:3px"></div>
            </template>
        </div>
    </div>
</div>

<div class="page" :class="{'active': p === 2}">
    <template x-if="!isReg">
        <div class="gost-card">
            <h3>–í–•–û–î –í –°–ò–°–¢–ï–ú–£</h3>
            <input type="text" x-model="userName" placeholder="–ü–æ–∑—ã–≤–Ω–æ–π...">
            <button class="btn-pusker" @click="register()">–ü–û–õ–£–ß–ò–¢–¨ –†–ê–ù–ì ¬´–õ–ò–ß–ò–ù–ö–ê¬ª</button>
        </div>
    </template>
    <template x-if="isReg">
        <div>
            <div id="chat-box" style="height:350px; overflow-y:auto; border:1px solid var(--blue); padding:10px; background:#000; margin-bottom:10px;">
                <template x-for="m in msgs">
                    <div style="margin-bottom:10px; border-left:2px solid var(--blue); padding-left:8px;">
                        <span style="font-weight:bold; color:var(--neon)" x-text="m.username"></span>
                        <span class="rank-label" x-text="m.rank"></span>
                        <div style="font-size:0.9rem" x-text="m.text"></div>
                    </div>
                </template>
            </div>
            <div style="display:flex; gap:5px;">
                <input type="text" x-model="newM" @keyup.enter="sendM()" placeholder="–ü—Ä–∏—ë–º...">
                <button @click="sendM()" style="width:80px; background:var(--blue); color:#fff; border:none;">–ü–£–°–ö</button>
            </div>
        </div>
    </template>
</div>

<div class="page" :class="{'active': p === 3}">
    <h3 style="color:var(--neon)">–Ø–©–ò–ö–ò –•–†–ê–ù–ï–ù–ò–Ø</h3>
    <div class="gost-card">
        <input type="text" x-model="boxNote" placeholder="–ß—Ç–æ –∫–ª–∞–¥–µ–º –≤ —è—â–∏–∫?">
        <button class="btn-pusker" @click="saveBox()">–ó–ê–ü–ò–°–ê–¢–¨ –í –ë–ê–ó–£</button>
    </div>
    <div class="gost-card">
        <strong>–°–û–î–ï–†–ñ–ò–ú–û–ï –û–ë–©–ï–ì–û –°–ö–õ–ê–î–ê:</strong>
        <template x-for="item in boxItems">
            <div style="display:flex; justify-content:space-between; padding:5px; border-bottom:1px solid #222;">
                <span x-text="item.content"></span>
                <button @click="deleteBox(item.id)" style="color:red; background:none; border:none; cursor:pointer;">[–£–î–ê–õ–ò–¢–¨]</button>
            </div>
        </template>
    </div>
</div>

<div class="page" :class="{'active': p === 4}">
    <input type="text" x-model="q" placeholder="–ü–æ–∏—Å–∫ (–ü–æ–¥—à–∏–ø–Ω–∏–∫, OBD, –¢-40, –î—ã–º)...">
    <div style="display:flex; gap:2px; margin:10px 0;">
        <button class="btn-pusker" @click="tab='sp'" :style="tab=='sp'?'background:var(--neon)':''">–ñ–ï–õ–ï–ó–û</button>
        <button class="btn-pusker" @click="tab='obd'" :style="tab=='obd'?'background:var(--neon)':''">OBD-II</button>
        <button class="btn-pusker" @click="tab='diag'" :style="tab=='diag'?'background:var(--neon)':''">–î–ò–ê–ì–ù–û–ó</button>
    </div>
    <div style="overflow-x:auto">
        <table x-show="tab=='sp'">
            <thead><tr><th>–í–∏–¥</th><th>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</th><th>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</th></tr></thead>
            <tbody>
                <template x-for="i in tech.filter(x => x.n.includes(q))">
                    <tr><td x-text="i.n"></td><td style="color:var(--neon)" x-text="i.v"></td><td x-text="i.u"></td></tr>
                </template>
            </tbody>
        </table>
        <table x-show="tab=='obd'">
            <thead><tr><th>–ö–æ–¥</th><th>–ú–∞—Ä–∫–∞</th><th>–°—É—Ç—å</th></tr></thead>
            <tbody>
                <template x-for="o in obd.filter(x => x.c.includes(q) || x.m.includes(q))">
                    <tr><td x-text="o.c"></td><td x-text="o.m"></td><td x-text="o.d"></td></tr>
                </template>
            </tbody>
        </table>
    </div>
</div>

<div class="page" :class="{'active': p === 5}">
    <h3 style="color:var(--neon)">–ò–ù–ñ–ï–ù–ï–†–ù–ê–Ø –û–ë–£–ß–ê–õ–ö–ê</h3>
    <div class="gost-card">
        <strong>–ö–ê–ö –ü–ò–°–ê–¢–¨ –ü–†–û–ú–¢:</strong><br>
        1. "–î–µ–π—Å—Ç–≤—É–π –∫–∞–∫ [–ò–ù–ñ–ï–ù–ï–†]"<br>
        2. "–°–æ–∑–¥–∞–π [–°–ü–ò–°–û–ö –ó–ê–ü–ß–ê–°–¢–ï–ô] –¥–ª—è [–¶–ï–õ–¨]"<br>
        3. "–£—á–∏—Ç—ã–≤–∞–π, —á—Ç–æ [–û–ì–†–ê–ù–ò–ß–ï–ù–ò–ï]"
    </div>
    <a href="https://promptcowboy.com" target="_blank" class="btn-pusker" style="display:block; text-align:center; text-decoration:none;">–ü–†–û–ú–¢ –ö–û–í–ë–û–ô</a>
    <a href="https://flowgpt.com" target="_blank" class="btn-pusker" style="display:block; text-align:center; text-decoration:none;">–ë–ê–ó–ê –ì–û–¢–û–í–´–• –ü–†–û–ú–¢–û–í</a>
</div>

<div class="page" :class="{'active': p === 6}">
    <h3 style="color:var(--neon)">–°–ï–†–í–ò–°–´ –ò –ò–ò (–ù–£–ñ–ï–ù VPN)</h3>
    <template x-for="l in links">
        <a :href="l.u" target="_blank" class="gost-card" style="display:block; text-decoration:none; color:inherit; text-align:center;" x-text="l.n"></a>
    </template>
</div>

<div class="page" :class="{'active': p === 7}">
    <div class="zone">
        <img src="https://api.dicebear.com/7.x/identicon/svg?seed=smoke" alt="Tabak">
        <div style="font-weight:bold; color:var(--neon)">–ê–†–¢–ï–õ–¨–ù–´–ô –¢–ê–ë–ê–ö</div>
        <a href="https://onliner.by" target="_blank" style="color:var(--text); font-size:0.8rem">–ù–û–í–û–°–¢–ò (ONLINER)</a>
    </div>
    <div class="zone">
        <img src="https://api.dicebear.com/7.x/identicon/svg?seed=coffee" alt="Coffee">
        <div style="font-weight:bold; color:var(--neon)">–ê–†–¢–ï–õ–¨–ù–´–ô –ö–û–§–ï</div>
        <a href="https://e-lib.belstu.by" target="_blank" style="color:var(--text); font-size:0.8rem">–ë–ò–ë–õ–ò–û–¢–ï–ö–ê (–ë–ì–¢–£)</a>
    </div>
    <div class="zone">
        <img src="https://api.dicebear.com/7.x/identicon/svg?seed=whiskey" alt="Gost">
        <div style="font-weight:bold; color:var(--neon)">–í–ò–°–ö–™ "–ê–†–¢–ï–õ–¨–ù–´–ô" –ì–û–°–¢</div>
        <a href="http://radiopotok.ru" target="_blank" style="color:var(--text); font-size:0.8rem">–ú–£–ó–´–ö–ê –ò –†–ê–î–ò–û</a>
    </div>
</div>

<div class="page" :class="{'active': p === 8}">
    <h3 style="color:var(--neon)">–¶–ï–•–û–í–´–ï –ù–ê–°–¢–†–û–ô–ö–ò</h3>
    <div class="gost-card">
        –¢–ï–ú–ê –ò–ù–¢–ï–†–§–ï–ô–°–ê:<br>
        <button class="btn-pusker" @click="theme=''">–ó–ê–í–û–î–°–ö–ê–Ø</button>
        <button class="btn-pusker" @click="theme='theme-modern'">–°–û–í–†–ï–ú–ï–ù–ù–û–ï –ê–í–¢–û</button>
        <button class="btn-pusker" @click="theme='theme-retro'">–†–ê–†–ò–¢–ï–¢</button>
    </div>
    <div class="gost-card" style="text-align:center; background:#fff; padding:10px;">
        <div id="qrcode"></div>
        <div style="color:#000; font-size:0.7rem">QR –î–õ–Ø –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø</div>
    </div>
</div>

<nav class="nav-bar">
    <template x-for="(ic, i) in icons">
        <div class="nav-item" :class="{'active': p === (i+1)}" @click="p=(i+1); ref()">
            <i :data-lucide="ic"></i>
        </div>
    </template>
</nav>

<script>
    // --- –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –ö –ë–ê–ó–ï ---
    const _URL = '–¢–í–û–ô_SUPABASE_URL';
    const _KEY = '–¢–í–û–ô_SUPABASE_ANON_KEY';
    const supabase = typeof supabase !== 'undefined' ? supabase.createClient(_URL, _KEY) : null;

    document.addEventListener('alpine:init', () => {
        Alpine.data('artelApp', () => ({
            p: 1, tab: 'sp', theme: localStorage.getItem('artel_theme') || '',
            isReg: localStorage.getItem('artel_isReg') || false,
            userName: localStorage.getItem('artel_user') || '',
            userRank: localStorage.getItem('artel_rank') || '–õ–∏—á–∏–Ω–∫–∞ –∏–Ω–∂–µ–Ω–µ—Ä–∞',
            newM: '', msgs: [], boxNote: '', boxItems: [], q: '',
            icons: ['home','message-square','package','wrench','brain','zap','coffee','settings'],
            holiday: '–ë—É–¥–Ω–∏ –ê—Ä—Ç–µ–ª–∏', murphy: '–ï—Å–ª–∏ –≥–∞–π–∫–∞ –Ω–µ –∏–¥–µ—Ç, –∑–Ω–∞—á–∏—Ç —Ä–µ–∑—å–±–∞ –ª–µ–≤–∞—è.',
            zapovedi: ['–ù–µ –ª–µ–∑—å –≤ –æ—Ç–ª–∞–∂–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º','–°–∏–Ω—è—è –∏–∑–æ–ª–µ–Ω—Ç–∞ - –≤–µ–Ω–µ—Ü —Ç–≤–æ—Ä–µ–Ω–∏—è','–ú–∞—Ç —É—Å–∫–æ—Ä—è–µ—Ç —Ä–µ–º–æ–Ω—Ç','–õ–∏—à–Ω–∏—Ö –¥–µ—Ç–∞–ª–µ–π –Ω–µ –±—ã–≤–∞–µ—Ç'],
            tech: [
                {n:'–ü–æ–¥—à–∏–ø–Ω–∏–∫ 203', v:'17x40x12', u:'–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä'},
                {n:'–°–∞–ª—å–Ω–∏–∫ 40—Ö60', v:'–†–µ–∑–∏–Ω–∞ –ì–û–°–¢', u:'–°—Ç—É–ø–∏—Ü–∞'},
                {n:'–†–µ–∑—å–±–∞ M10', v:'–®–∞–≥ 1.5 / 8.5–º–º', u:'–°—Ç–∞–Ω–¥–∞—Ä—Ç'}
            ],
            obd: [
                {c:'P0300', m:'–£–Ω–∏–≤–µ—Ä—Å–∞–ª', d:'–ü—Ä–æ–ø—É—Å–∫–∏ –∑–∞–∂–∏–≥–∞–Ω–∏—è'},
                {c:'P0171', m:'–ì—Ä—É–∑–æ–≤—ã–µ', d:'–ë–µ–¥–Ω–∞—è —Å–º–µ—Å—å'},
                {c:'E12', m:'–¢—Ä–∞–∫—Ç–æ—Ä –ú–¢–ó', d:'–ù–∏–∑–∫–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å–ª–∞'}
            ],
            links: [
                {n:'Gemini 1.5', u:'https://gemini.google.com'},
                {n:'Suno (–ú—É–∑—ã–∫–∞ AI)', u:'https://suno.com'},
                {n:'Notebook LM', u:'https://notebooklm.google.com'}
            ],

            async initApp() {
                this.holiday = "–°–º–µ–Ω–∞: " + new Date().toLocaleDateString('ru-RU');
                lucide.createIcons();
                this.genQR();
                if(supabase) {
                    this.fetchMsgs();
                    this.fetchBox();
                    // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (Realtime)
                    supabase.channel('any').on('postgres_changes', {event:'*', schema:'public'}, () => {
                        this.fetchMsgs(); this.fetchBox();
                    }).subscribe();
                }
            },
            ref() { setTimeout(() => lucide.createIcons(), 50); },
            register() {
                if(this.userName) {
                    this.isReg = true;
                    localStorage.setItem('artel_isReg', true);
                    localStorage.setItem('artel_user', this.userName);
                    localStorage.setItem('artel_rank', '–õ–∏—á–∏–Ω–∫–∞ –∏–Ω–∂–µ–Ω–µ—Ä–∞');
                }
            },
            async fetchMsgs() {
                const {data} = await supabase.from('messages').select('*').order('id', {ascending: false}).limit(20);
                if(data) this.msgs = data.reverse();
            },
            async sendM() {
                if(!this.newM) return;
                await supabase.from('messages').insert([{username:this.userName, text:this.newM, rank:this.userRank}]);
                this.newM = '';
            },
            async fetchBox() {
                const {data} = await supabase.from('boxes').select('*');
                if(data) this.boxItems = data;
            },
            async saveBox() {
                if(!this.boxNote) return;
                await supabase.from('boxes').insert([{content:this.boxNote, user:this.userName}]);
                this.boxNote = '';
            },
            async deleteBox(id) {
                await supabase.from('boxes').delete().eq('id', id);
            },
            genQR() {
                const qr = qrcode(0, 'M'); qr.addData(window.location.href); qr.make();
                document.getElementById('qrcode').innerHTML = qr.createImgTag(3);
            }
        }));
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
</body>
</html>
