<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ê–†–¢–ï–õ–¨: –ì–õ–ê–í–ù–´–ô –¶–ï–•</title>
    
    <script src="https://unpkg.com/lucide@0.321.0/dist/umd/lucide.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <script src="https://unpkg.com/alpinejs@3.13.5/dist/cdn.min.js" defer></script>

    <style>
        [x-cloak] { display: none !important; }
        :root { --blue-tape: #0047ab; --neon: #ff5e00; --steel: #bdc3c7; }
        body { background: #111; color: var(--steel); font-family: 'Courier New', monospace; margin: 0; padding-bottom: 90px; }
        
        .page { display: none; padding: 20px; animation: fadeIn 0.3s; }
        .active { display: block !important; }
        
        .gost-card { border: 1px solid var(--blue-tape); padding: 15px; margin-bottom: 10px; background: rgba(0,71,171,0.1); border-left: 4px solid var(--blue-tape); }
        .neon-text { color: var(--neon); text-shadow: 0 0 5px var(--neon); }
        
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: #000; display: flex; justify-content: space-around; padding: 15px 0; border-top: 2px solid var(--blue-tape); box-shadow: 0 -5px 15px rgba(0,0,0,0.5); z-index: 1000; }
        .nav-item { color: #444; cursor: pointer; transition: 0.3s; }
        .nav-item.active-nav { color: var(--neon); transform: translateY(-5px); }
        
        input, select { width: 100%; padding: 12px; background: #000; border: 1px solid var(--blue-tape); color: white; box-sizing: border-box; margin-top: 5px; }
        .btn-pusker { background: var(--blue-tape); border: none; color: white; padding: 10px 20px; cursor: pointer; font-weight: bold; }
        table { width: 100%; border-collapse: collapse; font-size: 0.8rem; }
        th, td { border: 1px solid #333; padding: 10px; text-align: center; }
        th { background: var(--blue-tape); color: white; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body x-data="artelCore" x-cloak>

    <header style="padding: 15px; text-align: center; background: #000; border-bottom: 1px solid var(--blue-tape);">
        <h1 style="margin: 0; font-size: 0.9rem; letter-spacing: 2px;" class="neon-text">üõ† –ê–†–¢–ï–õ–¨ –§–û–†–î–û–í–ê –ò –ë–ï–ù–¶–û–í–ê</h1>
    </header>

    <div :class="{ 'active': page === 1 }" class="page">
        <div class="gost-card">
            <div class="neon-text" style="font-weight: bold;" x-text="currentHoliday"></div>
            <div style="font-size: 0.8rem; font-style: italic; margin-top: 5px;" x-text="dailyQuote"></div>
        </div>
        <h3 class="neon-text">–ó–ê–ü–û–í–ï–î–ò –ú–ê–°–¢–ï–†–û–í</h3>
        <template x-for="(z, i) in zapovedi">
            <div class="gost-card" style="font-size: 0.8rem;" x-text="(i+1) + '. ' + z"></div>
        </template>
    </div>

    <div :class="{ 'active': page === 2 }" class="page">
        <h3 class="neon-text">–†–ê–î–ò–û–†–£–ë–ö–ê</h3>
        <div style="height: 300px; overflow-y: auto; border: 1px solid var(--blue-tape); background: #000; padding: 10px; margin-bottom: 10px;">
            <template x-for="m in messages">
                <div style="margin-bottom: 10px; border-left: 2px solid var(--blue-tape); padding-left: 10px;">
                    <small class="neon-text" x-text="m.username"></small><br>
                    <span x-text="m.text"></span>
                </div>
            </template>
        </div>
        <div style="display: flex; gap: 5px;">
            <input type="text" x-model="msg" @keyup.enter="sendMsg" placeholder="–ü—Ä–∏—ë–º...">
            <button @click="sendMsg" class="btn-pusker">–ü–£–°–ö</button>
        </div>
    </div>

    <div :class="{ 'active': page === 3 }" class="page">
        <h3 class="neon-text">–ë–ò–†–ñ–ê –î–ï–§–ò–¶–ò–¢–ê</h3>
        <template x-for="item in inventory">
            <div class="gost-card" style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <strong x-text="item.name" style="color: var(--neon);"></strong><br>
                    <small x-text="item.desc"></small>
                </div>
                <small x-text="item.owner" style="color: #666;"></small>
            </div>
        </template>
    </div>

    <div :class="{ 'active': page === 4 }" class="page">
        <h3 class="neon-text">–†–ï–ó–¨–ë–´ –ì–û–°–¢</h3>
        <table>
            <thead><tr><th>M</th><th>–®–∞–≥</th><th>–°–≤–µ—Ä–ª–æ</th></tr></thead>
            <tbody>
                <template x-for="r in rezba">
                    <tr><td x-text="r.m"></td><td x-text="r.s"></td><td x-text="r.d" class="neon-text"></td></tr>
                </template>
            </tbody>
        </table>
        <h3 class="neon-text" style="margin-top: 20px;">OBD-II –ö–û–î–´</h3>
        <input type="text" x-model="obdQuery" placeholder="P0300...">
        <div style="margin-top: 10px; padding: 10px; background: #000; border: 1px solid var(--neon);" x-text="scanOBD()"></div>
    </div>

    <div :class="{ 'active': page === 5 }" class="page">
        <h3 class="neon-text">–ù–ï–ô–†–û-–í–ï–†–°–¢–ê–ö</h3>
        <div class="gost-card"><a href="https://gemini.google.com" style="color: white; text-decoration: none;">ü§ñ Gemini AI (–ò–Ω–∂–µ–Ω–µ—Ä)</a></div>
        <div class="gost-card"><a href="https://suno.com" style="color: white; text-decoration: none;">üé∏ Suno (–ì–∞—Ä–∞–∂–Ω—ã–π —Ä–æ–∫)</a></div>
        <div class="gost-card"><a href="https://canva.com" style="color: white; text-decoration: none;">üé® Canva (–ß–µ—Ä—Ç–µ–∂–∏)</a></div>
    </div>

    <div :class="{ 'active': page === 6 }" class="page">
        <h3 class="neon-text">–ì–ï–ù–ï–†–ê–¢–û–† –ò–î–ï–ô</h3>
        <div class="gost-card" x-text="currentPrompt"></div>
        <button @click="shufflePrompt" class="btn-pusker" style="width: 100%;">–°–õ–ï–î–£–Æ–©–ê–Ø –ò–î–ï–Ø</button>
    </div>

    <div :class="{ 'active': page === 7 }" class="page">
        <h3 class="neon-text">–ì–ê–†–ê–ñ–ù–´–ï –ë–ê–ô–ö–ò</h3>
        <div class="gost-card" x-text="currentJoke"></div>
        <button @click="shuffleJoke" class="btn-pusker" style="width: 100%;">–ï–©–Å!</button>
    </div>

    <div :class="{ 'active': page === 8 }" class="page">
        <h3 class="neon-text">–ù–ê–°–¢–†–û–ô–ö–ò</h3>
        <div class="gost-card">
            <label>–¢–≤–æ–π –ø–æ–∑—ã–≤–Ω–æ–π:</label>
            <input type="text" x-model="username">
        </div>
        <div id="qrcode" style="display: flex; justify-content: center; background: #fff; padding: 15px; border: 4px solid var(--blue-tape); margin-top: 10px;"></div>
    </div>

    <nav class="nav-bar">
        <div class="nav-item" :class="{'active-nav': page === 1}" @click="setPage(1)"><i data-lucide="home"></i></div>
        <div class="nav-item" :class="{'active-nav': page === 2}" @click="setPage(2)"><i data-lucide="message-circle"></i></div>
        <div class="nav-item" :class="{'active-nav': page === 3}" @click="setPage(3)"><i data-lucide="package"></i></div>
        <div class="nav-item" :class="{'active-nav': page === 4}" @click="setPage(4)"><i data-lucide="wrench"></i></div>
        <div class="nav-item" :class="{'active-nav': page === 5}" @click="setPage(5)"><i data-lucide="zap"></i></div>
        <div class="nav-item" :class="{'active-nav': page === 6}" @click="setPage(6)"><i data-lucide="brain-circuit"></i></div>
        <div class="nav-item" :class="{'active-nav': page === 7}" @click="setPage(7)"><i data-lucide="laugh"></i></div>
        <div class="nav-item" :class="{'active-nav': page === 8}" @click="setPage(8)"><i data-lucide="settings"></i></div>
    </nav>

    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('artelCore', () => ({
                page: 1,
                username: localStorage.getItem('artel_user') || '–ò–Ω–∂–µ–Ω–µ—Ä-' + Math.floor(Math.random() * 99),
                msg: '',
                messages: [],
                obdQuery: '',
                currentHoliday: '–†–∞–±–æ—á–∞—è —Å–º–µ–Ω–∞',
                dailyQuote: '–†–∞–±–æ—Ç–∞–µ—Ç? –ù–µ —Ç—Ä–æ–≥–∞–π!',
                currentPrompt: '–°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π –≤–µ—á–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å –Ω–∞ —Å–∏–Ω–µ–π –∏–∑–æ–ª–µ–Ω—Ç–µ...',
                currentJoke: '–õ–∏—à–Ω—è—è –¥–µ—Ç–∞–ª—å - —ç—Ç–æ –ø—Ä–∏–∑–Ω–∞–∫ —Ç–æ–≥–æ, —á—Ç–æ —Ç—ã –∏–Ω–∂–µ–Ω–µ—Ä –ª—É—á—à–µ, —á–µ–º –∑–∞–≤–æ–¥—Å–∫–æ–π.',
                
                zapovedi: ["–¢–ë ‚Äî –Ω–µ –¥–æ–≥–º–∞, –∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è.", "–°–∏–Ω—è—è –∏–∑–æ–ª–µ–Ω—Ç–∞ –ª–µ—á–∏—Ç –≤—Å—ë.", "–õ–∏—à–Ω—è—è –¥–µ—Ç–∞–ª—å ‚Äî —ç—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è.", "–û–±–º—ã–ª ‚Äî –∑–Ω–∞—á–∏—Ç, –∑–∞–∫—Ä–µ–ø–∏–ª."],
                inventory: [{name:'–ö-126 –ö–∞—Ä–±—é—Ä–∞—Ç–æ—Ä', desc:'–ù–∞ –∑–∞–ø—á–∞—Å—Ç–∏', owner:'–î—è–¥—è –Æ—Ä–∞'}, {name:'–ò–∑–æ–ª–µ–Ω—Ç–∞', desc:'–°–∏–Ω—è—è, –Ω–æ–≤–∞—è', owner:'–ê–¥–º–∏–Ω'}],
                rezba: [{m:'M6', s:'1.0', d:'5.0'}, {m:'M8', s:'1.25', d:'6.8'}, {m:'M10', s:'1.5', d:'8.5'}],
                
                sb: null,

                init() {
                    this.renderIcons();
                    this.updateCalendar();
                    this.generateQR();
                    this.initSupabase();
                },

                setPage(p) {
                    this.page = p;
                    this.$nextTick(() => this.renderIcons());
                },

                renderIcons() { if (window.lucide) lucide.createIcons(); },

                async initSupabase() {
                    try {
                        this.sb = supabase.createClient('https://grsszunlfmehyykkvccj.supabase.co', 'ZTEGCDF4981E');
                        const { data } = await this.sb.from('artel_messages').select('*').limit(20);
                        if (data) this.messages = data;
                        
                        this.sb.channel('artel-live').on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'artel_messages' }, p => {
                            this.messages.push(p.new);
                        }).subscribe();
                    } catch (e) { console.warn("Supabase Offline"); }
                },

                async sendMsg() {
                    if (!this.msg) return;
                    const m = { username: this.username, text: this.msg };
                    if (this.sb) await this.sb.from('artel_messages').insert([m]);
                    else this.messages.push(m);
                    this.msg = '';
                },

                scanOBD() {
                    const codes = {"P0300": "–ü—Ä–æ–ø—É—Å–∫–∏ –∑–∞–∂–∏–≥–∞–Ω–∏—è", "P0171": "–ë–µ–¥–Ω–∞—è —Å–º–µ—Å—å"};
                    return codes[this.obdQuery.toUpperCase()] || "–ö–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω.";
                },

                updateCalendar() {
                    const holidays = {"07-03": "–î–µ–Ω—å –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –†–ë", "01-01": "–ù–æ–≤—ã–π –ì–æ–¥"};
                    const day = new Date().toISOString().slice(5,10);
                    this.currentHoliday = holidays[day] || "–ë—É–¥–Ω–∏ –≤ –ê—Ä—Ç–µ–ª–∏";
                },

                shufflePrompt() { this.currentPrompt = "–ò–¥–µ—è: –°–æ–±–µ—Ä–∏ –ß–ü–£ –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–∏–Ω—Ç–µ—Ä–∞!"; },
                shuffleJoke() { this.currentJoke = "–í—Å–∫—Ä—ã—Ç–∏–µ –ø–æ–∫–∞–∑–∞–ª–æ: –ø–∞—Ü–∏–µ–Ω—Ç —É–º–µ—Ä –æ—Ç –≤—Å–∫—Ä—ã—Ç–∏—è."; },

                generateQR() {
                    if (window.qrcode) {
                        const qr = qrcode(0, 'M');
                        qr.addData(window.location.href);
                        qr.make();
                        document.getElementById('qrcode').innerHTML = qr.createImgTag(4);
                    }
                }
            }));
        });
    </script>
</body>
</html>
