<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ò–Ω–∂–µ–Ω–µ—Ä–Ω—ã–π —Ö–∞–± –°–ò–ù–Ø–Ø –ò–ó–û–õ–ï–ù–¢–ê</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

    <style>
        /* --- –¶–í–ï–¢–û–í–´–ï –¢–ï–ú–´ --- */
        :root { --main: #0038a8; --bg: #f0f2f5; --card: #ffffff; --text: #1a202c; }
        body.theme-dark { --main: #3b82f6; --bg: #1a202c; --card: #2d3748; --text: #f7fafc; }
        body.theme-safety { --main: #eab308; --bg: #fefce8; --card: #ffffff; --text: #422006; }
        body.theme-oil { --main: #92400e; --bg: #1c1917; --card: #292524; --text: #e7e5e4; }
        body.theme-neon { --main: #00ff41; --bg: #0d0208; --card: #000000; --text: #00ff41; }

        body { font-family: 'Segoe UI', system-ui, sans-serif; margin: 0; background: var(--bg); color: var(--text); transition: 0.3s; overflow-x: hidden; }
        
        /* –õ–û–ì–û–¢–ò–ü –ò –®–ê–ü–ö–ê */
        header { background: var(--main); color: white; padding: 15px; position: sticky; top: 0; z-index: 1000; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.2); }
        .logo-area { display: flex; align-items: center; gap: 10px; }
        .logo-icon { width: 35px; height: 35px; background: white; border-radius: 4px; display: flex; align-items: center; justify-content: center; transform: rotate(-10deg); border: 2px solid #002366; }
        
        /* –ù–ê–í–ò–ì–ê–¶–ò–Ø */
        nav { position: fixed; bottom: 0; width: 100%; background: var(--card); border-top: 3px solid var(--main); display: flex; justify-content: space-around; padding: 10px 0; z-index: 1000; }
        .nav-item { background: none; border: none; font-size: 22px; cursor: pointer; color: var(--text); opacity: 0.5; display: flex; flex-direction: column; align-items: center; text-decoration: none; }
        .nav-item.active { opacity: 1; color: var(--main); font-weight: bold; }
        .nav-item span { font-size: 10px; margin-top: 2px; }

        /* –°–¢–†–ê–ù–ò–¶–´ */
        .page { display: none; padding: 15px; padding-bottom: 90px; animation: slideIn 0.3s ease-out; max-width: 800px; margin: 0 auto; }
        .page.active { display: block; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .card { background: var(--card); border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-left: 6px solid var(--main); }
        h2 { margin-top: 0; color: var(--main); font-size: 1.2rem; text-transform: uppercase; }

        /* –ö–ê–õ–ï–ù–î–ê–†–¨ */
        .cal-controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .cal-grid { display: grid; grid-template-cols: repeat(7, 1fr); gap: 5px; text-align: center; }
        .cal-header { font-weight: bold; font-size: 12px; padding-bottom: 5px; opacity: 0.7; }
        .cal-cell { background: rgba(0,0,0,0.05); aspect-ratio: 1/1; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 6px; font-size: 14px; position: relative; border: 1px solid transparent; }
        .cal-cell.today { background: var(--main); color: white; font-weight: bold; }
        .cal-cell.holiday { color: #ef4444; }
        .cal-cell.has-note::after { content: ''; width: 4px; height: 4px; background: #ef4444; border-radius: 50%; position: absolute; bottom: 4px; }
        .holiday-name { font-size: 7px; position: absolute; bottom: 2px; width: 90%; overflow: hidden; white-space: nowrap; }

        /* –¢–ê–ë–õ–ò–¶–´ –°–ü–†–ê–í–û–ß–ù–ò–ö–û–í */
        .table-res { overflow-x: auto; margin-top: 10px; }
        table { width: 100%; border-collapse: collapse; font-size: 13px; }
        th { background: var(--main); color: white; padding: 10px; text-align: left; }
        td { padding: 10px; border-bottom: 1px solid rgba(0,0,0,0.1); }
        
        /* –ö–ù–û–ü–ö–ò –ò –í–í–û–î */
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #cbd5e0; border-radius: 8px; box-sizing: border-box; background: var(--card); color: var(--text); }
        .btn { background: var(--main); color: white; border: none; padding: 12px 20px; border-radius: 8px; font-weight: bold; width: 100%; cursor: pointer; }
    </style>
</head>
<body>

<header>
    <div class="logo-area">
        <div class="logo-icon"><b style="color: #0038a8">Si</b></div>
        <div style="line-height: 1">
            <b style="font-size: 16px;">–°–ò–ù–Ø–Ø –ò–ó–û–õ–ï–ù–¢–ê</b><br>
            <small style="font-size: 9px; opacity: 0.8">–ò–Ω–∂–µ–Ω–µ—Ä–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞</small>
        </div>
    </div>
    <button onclick="toggleSettings()" style="background:none; border:none; font-size: 20px; cursor:pointer;">‚öôÔ∏è</button>
</header>

<main id="content">
    <section id="page-cal" class="page active">
        <div class="card">
            <div class="cal-controls">
                <button onclick="changeMonth(-1)" class="btn" style="width: auto;">‚óÄ</button>
                <h3 id="current-month-year" style="margin:0">–§–µ–≤—Ä–∞–ª—å 2026</h3>
                <button onclick="changeMonth(1)" class="btn" style="width: auto;">‚ñ∂</button>
            </div>
            <div class="cal-grid">
                <div class="cal-header">–ü–Ω</div><div class="cal-header">–í—Ç</div><div class="cal-header">–°—Ä</div>
                <div class="cal-header">–ß—Ç</div><div class="cal-header">–ü—Ç</div><div class="cal-header" style="color:red">–°–±</div><div class="cal-header" style="color:red">–í—Å</div>
            </div>
            <div id="calendar-body" class="cal-grid"></div>
        </div>
        <div class="card" style="border-left-color: #f59e0b;">
            <h4 style="margin:0 0 5px 0">üí° –ú—ã—Å–ª—å –¥–Ω—è:</h4>
            <p id="quote-display" style="font-style: italic; font-size: 13px; margin:0;"></p>
        </div>
    </section>

    <section id="page-ref" class="page">
        <h2>‚öôÔ∏è –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –º–µ—Ö–∞–Ω–∏–∫–∞</h2>
        <div class="card">
            <h3>–ú–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è —Ä–µ–∑—å–±–∞ (–æ—Å–Ω–æ–≤–Ω–∞—è)</h3>
            <div class="table-res">
                <table>
                    <tr><th>–†–µ–∑—å–±–∞</th><th>–®–∞–≥</th><th>–°–≤–µ—Ä–ª–æ</th></tr>
                    <tr><td>M3</td><td>0.5</td><td>2.5 –º–º</td></tr>
                    <tr><td>M4</td><td>0.7</td><td>3.3 –º–º</td></tr>
                    <tr><td>M5</td><td>0.8</td><td>4.2 –º–º</td></tr>
                    <tr><td>M6</td><td>1.0</td><td>5.0 –º–º</td></tr>
                    <tr><td>M8</td><td>1.25</td><td>6.8 –º–º</td></tr>
                    <tr><td>M10</td><td>1.5</td><td>8.5 –º–º</td></tr>
                    <tr><td>M12</td><td>1.75</td><td>10.2 –º–º</td></tr>
                    <tr><td>M16</td><td>2.0</td><td>14.0 –º–º</td></tr>
                </table>
            </div>
        </div>
        <div class="card">
            <h3>–ü–æ–¥—à–∏–ø–Ω–∏–∫–∏ (–†–∞–¥–∏–∞–ª—å–Ω—ã–µ 200)</h3>
            <div class="table-res">
                <table>
                    <tr><th>‚Ññ</th><th>d (–≤–Ω—É—Ç—Ä)</th><th>D (–≤–Ω–µ—à)</th><th>B (—à–∏—Ä)</th></tr>
                    <tr><td>201</td><td>12 –º–º</td><td>32 –º–º</td><td>10 –º–º</td></tr>
                    <tr><td>202</td><td>15 –º–º</td><td>35 –º–º</td><td>11 –º–º</td></tr>
                    <tr><td>203</td><td>17 –º–º</td><td>40 –º–º</td><td>12 –º–º</td></tr>
                    <tr><td>204</td><td>20 –º–º</td><td>47 –º–º</td><td>14 –º–º</td></tr>
                    <tr><td>205</td><td>25 –º–º</td><td>52 –º–º</td><td>15 –º–º</td></tr>
                </table>
            </div>
        </div>
    </section>

    <section id="page-dtc" class="page">
        <h2>‚ö†Ô∏è –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ DTC</h2>
        <input type="text" id="dtc-input" oninput="searchDTC()" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, P0300)...">
        <div id="dtc-results"></div>
        <div class="card">
            <small>–í –±–∞–∑–µ: –ê–≤—Ç–æ–º–æ–±–∏–ª–∏ (P, U, B, C –∫–æ–¥—ã), –¢—Ä–∞–∫—Ç–æ—Ä—ã –ú–¢–ó, –ö–æ–º–±–∞–π–Ω—ã.</small>
        </div>
    </section>

    <section id="page-joke" class="page">
        <h2>üòÇ –ú–∏–Ω—É—Ç–∫–∞ –æ—Ç–¥—ã—Ö–∞</h2>
        <div id="joke-content" class="card" style="text-align:center; font-size: 1.1rem; min-height: 100px; display: flex; align-items: center; justify-content: center;">
            –ó–∞–≥—Ä—É–∑–∫–∞ —à—É—Ç–∫–∏...
        </div>
        <button onclick="getNewJoke()" class="btn">–ï–©–Å –ê–ù–ï–ö–î–û–¢</button>
    </section>
</main>

<nav id="navbar">
    <button class="nav-item active" onclick="showPage('cal')"><span>üìÖ</span><span>–ö–∞–ª.</span></button>
    <button class="nav-item" onclick="showPage('chat')"><span>üí¨</span><span>–ß–∞—Ç</span></button>
    <button class="nav-item" onclick="showPage('ref')"><span>‚öôÔ∏è</span><span>–°–ø—Ä.</span></button>
    <button class="nav-item" onclick="showPage('dtc')"><span>‚ö†Ô∏è</span><span>DTC</span></button>
    <button class="nav-item" onclick="showPage('joke')"><span>üòÇ</span><span>–Æ–º–æ—Ä</span></button>
</nav>

<div id="settings-modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); z-index:2000; padding:20px; align-items:center; justify-content:center;">
    <div class="card" style="width:100%; max-width:400px;">
        <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–º</h3>
        <select onchange="changeTheme(this.value)">
            <option value="classic">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—è—è</option>
            <option value="dark">–ù–æ—á–Ω–∞—è —Å–º–µ–Ω–∞</option>
            <option value="safety">–¢–µ—Ö–Ω–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–∂–µ–ª—Ç–∞—è)</option>
            <option value="oil">–ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞ (—Ç–µ–º–Ω–∞—è)</option>
            <option value="neon">–í—ã—Å–æ–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ</option>
        </select>
        <button onclick="toggleSettings()" class="btn" style="margin-top:10px; background:#666;">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>

<script>
    // --- –î–ê–ù–ù–´–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ---
    const holidays = {"01-01":"–ù–æ–≤—ã–π –≥–æ–¥","01-07":"–†–æ–∂–¥–µ—Å—Ç–≤–æ","03-08":"8 –ú–∞—Ä—Ç–∞","05-01":"1 –ú–∞—è","05-09":"–î–µ–Ω—å –ü–æ–±–µ–¥—ã","07-03":"–î–µ–Ω—å –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏","11-07":"–û–∫—Ç. —Ä–µ–≤–æ–ª—é—Ü–∏—è","12-25":"–†–æ–∂–¥–µ—Å—Ç–≤–æ(–ö)"};
    const quotes = [
        "–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –Ω–µ —Ç—Ä–æ–≥–∞–π.",
        "–ù–µ —Å–ª–µ–¥—É–µ—Ç –º–Ω–æ–∂–∏—Ç—å —Å—É—â–Ω–æ—Å—Ç–∏ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (–ë—Ä–∏—Ç–≤–∞ –û–∫–∫–∞–º–∞).",
        "–ò–∑ –¥–≤—É—Ö —Ä–µ—à–µ–Ω–∏–π –≤—ã–±–∏—Ä–∞–π —Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ.",
        "–ï—Å–ª–∏ –¥–µ—Ç–∞–ª—å –Ω–µ –ª–µ–∑–µ—Ç, –≤–æ–∑—å–º–∏ –º–æ–ª–æ—Ç–æ–∫ –ø–æ–±–æ–ª—å—à–µ.",
        "–ó–∞–∫–æ–Ω –ú—ë—Ä—Ñ–∏: –í—Å—ë, —á—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫, –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫."
    ];
    const jokes = [
        "–ú–µ—Ö–∞–Ω–∏–∫ ‚Äî —ç—Ç–æ –≤—Ä–∞—á, –ø–∞—Ü–∏–µ–Ω—Ç—ã –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ –º–æ–≥—É—Ç –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è.",
        "–£ —Ö–æ—Ä–æ—à–µ–≥–æ –∏–Ω–∂–µ–Ω–µ—Ä–∞ –Ω–µ –±—ã–≤–∞–µ—Ç –ª–∏—à–Ω–∏—Ö –¥–µ—Ç–∞–ª–µ–π, –±—ã–≤–∞—é—Ç –∑–∞–ø–∞—Å–Ω—ã–µ.",
        "–ó–∞—á–µ–º –º–Ω–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è? –Ø –∏ —Ç–∞–∫ —É–∂–µ –≤—Å—ë —Å–ª–æ–º–∞–ª!",
        "–°—Ç—É–∫ –≤ –¥–≤–∏–≥–∞—Ç–µ–ª–µ –≤—Å–µ–≥–¥–∞ –Ω–∞—Ä—É–∂—É –≤—ã–π–¥–µ—Ç."
    ];
    const dtcCodes = {
        "P0300": "–ü—Ä–æ–ø—É—Å–∫–∏ –∑–∞–∂–∏–≥–∞–Ω–∏—è (—Å–ª—É—á–∞–π–Ω—ã–µ)",
        "P0101": "–î–∞—Ç—á–∏–∫ –º–∞—Å—Å–æ–≤–æ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞ –≤–æ–∑–¥—É—Ö–∞ (–≤—ã—Ö–æ–¥ –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞)",
        "P0171": "–°–ª–∏—à–∫–æ–º –±–µ–¥–Ω–∞—è —Å–º–µ—Å—å (–ë–∞–Ω–∫ 1)",
        "P0420": "–ù–∏–∑–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–∞—Ç–∞–ª–∏–∑–∞—Ç–æ—Ä–∞",
        "E12": "–¢—Ä–∞–∫—Ç–æ—Ä –ú–¢–ó: –ù–∏–∑–∫–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å–ª–∞"
    };

    let currentDate = new Date();

    // --- –õ–û–ì–ò–ö–ê –ö–ê–õ–ï–ù–î–ê–†–Ø ---
    function renderCalendar() {
        const body = document.getElementById('calendar-body');
        const title = document.getElementById('current-month-year');
        body.innerHTML = '';
        
        const year = currentDate.getFullYear();
        const month = currentDate.getMonth();
        title.innerText = new Intl.DateTimeFormat('ru-RU', {month: 'long', year: 'numeric'}).format(currentDate);

        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        const offset = firstDay === 0 ? 6 : firstDay - 1; // –°–¥–≤–∏–≥ –¥–ª—è –ü–Ω-–í—Å

        for(let i=0; i<offset; i++) body.innerHTML += '<div></div>';
        
        for(let d=1; d<=daysInMonth; d++) {
            const dateStr = `${String(month+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
            const isHoliday = holidays[dateStr];
            const isToday = d === new Date().getDate() && month === new Date().getMonth() && year === new Date().getFullYear();
            
            body.innerHTML += `
                <div class="cal-cell ${isToday?'today':''} ${isHoliday?'holiday':''}">
                    ${d}
                    ${isHoliday ? `<span class="holiday-name">${isHoliday}</span>` : ''}
                </div>`;
        }
        document.getElementById('quote-display').innerText = quotes[Math.floor(Math.random()*quotes.length)];
    }

    function changeMonth(dir) {
        currentDate.setMonth(currentDate.getMonth() + dir);
        renderCalendar();
    }

    // --- –ù–ê–í–ò–ì–ê–¶–ò–Ø ---
    function showPage(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById('page-' + id).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    // --- DTC –ü–û–ò–°–ö ---
    function searchDTC() {
        const query = document.getElementById('dtc-input').value.toUpperCase();
        const container = document.getElementById('dtc-results');
        container.innerHTML = '';
        if(!query) return;

        for(let code in dtcCodes) {
            if(code.includes(query)) {
                container.innerHTML += `<div class="card"><b>${code}:</b> ${dtcCodes[code]}</div>`;
            }
        }
    }

    // --- –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û ---
    function changeTheme(theme) { document.body.className = 'theme-' + theme; }
    function toggleSettings() { 
        const m = document.getElementById('settings-modal');
        m.style.display = m.style.display === 'none' ? 'flex' : 'none';
    }
    function getNewJoke() { 
        document.getElementById('joke-content').innerText = jokes[Math.floor(Math.random()*jokes.length)];
    }

    window.onload = () => {
        renderCalendar();
        getNewJoke();
    };
</script>
</body>
</html>
