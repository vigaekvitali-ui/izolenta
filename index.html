<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ê–†–¢–ï–õ–¨ –§–û–†–î–û–í–ê –ò –ë–ï–ù–¶–û–í–ê</title>
    
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>

    <style>
        [x-cloak] { display: none !important; }
        :root { --blue-tape: #0047ab; --neon: #ff5e00; --steel: #bdc3c7; }
        body { background: #1a1a1a; color: var(--steel); font-family: 'Courier New', monospace; margin: 0; padding-bottom: 80px; }
        
        .page { display: none; padding: 20px; animation: fadeIn 0.2s; }
        .active { display: block !important; }
        .gost-card { border: 1px solid var(--blue-tape); padding: 15px; margin-bottom: 10px; background: rgba(0,71,171,0.1); }
        
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: #000; display: flex; justify-content: space-around; padding: 15px 0; border-top: 2px solid var(--blue-tape); z-index: 9999; }
        .nav-item { color: var(--steel); cursor: pointer; padding: 5px 15px; }
        .active-nav { color: var(--neon) !important; transform: scale(1.2); }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.8rem; }
        th, td { border: 1px solid #444; padding: 8px; text-align: center; }
        th { background: var(--blue-tape); color: white; }
    </style>
</head>
<body x-data="artelCore" x-cloak>

    <header style="text-align: center; border-bottom: 2px solid var(--blue-tape); padding: 10px; background: #000;">
        <h2 style="margin: 0; font-size: 0.9rem; letter-spacing: 1px;">üõ† –ê–†–¢–ï–õ–¨: –ì–õ–ê–í–ù–´–ô –¶–ï–• üõ†</h2>
    </header>

    <div :class="{ 'active': page === 1 }" class="page">
        <div class="gost-card">
            <div style="color: var(--neon); font-weight: bold;" x-text="currentHoliday"></div>
            <div style="font-size: 0.8rem; font-style: italic; margin-top: 5px;" x-text="dailyQuote"></div>
        </div>
        <h3 style="color: var(--neon);">–£–°–¢–ê–í –ê–†–¢–ï–õ–ò</h3>
        <template x-for="(z, i) in zapovedi">
            <div class="gost-card" style="font-size: 0.8rem;" x-text="(i+1) + '. ' + z"></div>
        </template>
    </div>

    <div :class="{ 'active': page === 2 }" class="page">
        <h3 style="color: var(--neon);">–†–ê–î–ò–û–†–£–ë–ö–ê</h3>
        <div style="height: 250px; overflow-y: auto; border: 1px solid var(--blue-tape); padding: 10px; background: #000; margin-bottom: 10px;">
            <template x-for="m in messages">
                <div style="margin-bottom: 8px; border-left: 2px solid var(--blue-tape); padding-left: 8px;">
                    <small x-text="m.user" style="color: var(--neon);"></small>:<br>
                    <span x-text="m.text"></span>
                </div>
            </template>
        </div>
        <div style="display: flex; gap: 5px;">
            <input type="text" x-model="msg" style="flex: 1; background: #222; color: white; border: 1px solid var(--blue-tape); padding: 10px;" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ...">
            <button @click="sendMsg" style="background: var(--blue-tape); color: white; border: none; padding: 10px;">–ü–£–°–ö</button>
        </div>
    </div>

    <div :class="{ 'active': page === 4 }" class="page">
        <h3 style="color: var(--neon);">–¢–ê–ë–õ–ò–¶–ê –†–ï–ó–¨–ë</h3>
        
        <table>
            <thead><tr><th>M</th><th>–®–∞–≥</th><th>–°–≤–µ—Ä–ª–æ</th></tr></thead>
            <tbody>
                <template x-for="r in rezba">
                    <tr><td x-text="r.m"></td><td x-text="r.s"></td><td x-text="r.d" style="color: var(--neon);"></td></tr>
                </template>
            </tbody>
        </table>
        <h3 style="color: var(--neon); margin-top: 20px;">OBD-II</h3>
        <input type="text" x-model="obdQuery" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ (–Ω–∞–ø—Ä. P0300)" style="width: 100%; padding: 10px; background: #222; border: 1px solid var(--blue-tape); color: white; box-sizing: border-box;">
        <div style="margin-top: 10px; padding: 10px; background: #000; border: 1px solid var(--neon);" x-text="scanOBD()"></div>
    </div>

    <div :class="{ 'active': page === 8 }" class="page">
        <h3 style="color: var(--neon);">–ò–ù–°–¢–†–£–ú–ï–ù–¢–´</h3>
        <div id="qrcode" style="display: flex; justify-content: center; background: white; padding: 10px; border: 5px solid var(--blue-tape);"></div>
        <p style="text-align: center; font-size: 0.7rem; margin-top: 10px;">QR –î–õ–Ø –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø –ù–ê–ü–ê–†–ù–ò–ö–ê</p>
    </div>

    <nav class="nav-bar">
        <div class="nav-item" :class="{'active-nav': page === 1}" @click="setPage(1)"><i data-lucide="home"></i></div>
        <div class="nav-item" :class="{'active-nav': page === 2}" @click="setPage(2)"><i data-lucide="message-circle"></i></div>
        <div class="nav-item" :class="{'active-nav': page === 4}" @click="setPage(4)"><i data-lucide="wrench"></i></div>
        <div class="nav-item" :class="{'active-nav': page === 8}" @click="setPage(8)"><i data-lucide="settings"></i></div>
    </nav>

    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('artelCore', () => ({
                page: 1,
                msg: '',
                messages: [{user: '–ú–ê–°–¢–û–î–û–ù–¢', text: '–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ.'}],
                obdQuery: '',
                currentHoliday: '–û–±—ã—á–Ω—ã–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å',
                dailyQuote: '–ï—Å–ª–∏ –Ω–µ –∑–∞—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è ‚Äî –≤–æ–∑—å–º–∏ —Ä—ã—á–∞–≥ –±–æ–ª—å—à–µ.',
                zapovedi: ["–¢–ë ‚Äî –Ω–µ –¥–æ–≥–º–∞, –∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è.", "–°–∏–Ω—è—è –∏–∑–æ–ª–µ–Ω—Ç–∞ –ª–µ—á–∏—Ç –≤—Å—ë.", "–õ–∏—à–Ω—è—è –¥–µ—Ç–∞–ª—å ‚Äî —ç—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–µ—Å–∞."],
                rezba: [{m:'M6', s:'1.0', d:'5.0'}, {m:'M8', s:'1.25', d:'6.8'}, {m:'M10', s:'1.5', d:'8.5'}, {m:'M12', s:'1.75', d:'10.2'}],

                init() {
                    lucide.createIcons();
                    this.generateQR();
                },

                setPage(p) {
                    this.page = p;
                    // –î–∞–µ–º Alpine –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–∏—Ç—å DOM, –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∏–∫–æ–Ω–∫–∏
                    this.$nextTick(() => { lucide.createIcons(); });
                },

                sendMsg() {
                    if(!this.msg) return;
                    this.messages.push({user: '–ò–ù–ñ–ï–ù–ï–†', text: this.msg});
                    this.msg = '';
                },

                scanOBD() {
                    const codes = {"P0300": "–ü—Ä–æ–ø—É—Å–∫–∏ –∑–∞–∂–∏–≥–∞–Ω–∏—è", "P0171": "–°–ª–∏—à–∫–æ–º –±–µ–¥–Ω–∞—è —Å–º–µ—Å—å"};
                    return codes[this.obdQuery.toUpperCase()] || "–ö–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω. –ò—â–∏ –ø–æ–¥—Å–æ—Å –≤–æ–∑–¥—É—Ö–∞.";
                },

                generateQR() {
                    const qr = qrcode(0, 'M');
                    qr.addData(window.location.href);
                    qr.make();
                    const el = document.getElementById('qrcode');
                    if(el) el.innerHTML = qr.createImgTag(5);
                }
            }));
        });
    </script>
</body>
</html>
